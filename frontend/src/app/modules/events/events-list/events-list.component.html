<div class="events-list-container">
  <div *ngIf="loading" class="loading-overlay">
    <div class="spinner"></div>
  </div>

  <ng-container *ngIf="!loading">
    <div class="events-header">
      <div class="search-box">
        <input
          class="search-input"
          placeholder="Buscar eventos..."
          [(ngModel)]="search"
          (ngModelChange)="filter()"
          [ngModelOptions]="{ standalone: true }"
        />
        <button class="button button-primary" (click)="onCreate()">
          <span class="button-icon">+</span>
          Crear Evento
        </button>
      </div>
    </div>

    <div class="events-grid" *ngIf="filtered.length > 0">
      <div
        *ngFor="let e of filtered"
        class="event-card"
        (click)="onView(e)"
      >
        <div class="event-card-header">
          <h3 class="event-title">{{ e.name }}</h3>
          <span class="event-status" [class.active]="e.active">
            {{ e.active ? 'Activo' : 'Inactivo' }}
          </span>
        </div>
        
        <div class="event-card-body">
          <div class="event-info">
            <div class="info-item">
              <span class="info-label">Fecha:</span>
              <span class="info-value">{{ e.date | date:'medium' }}</span>
            </div>
            <div class="info-item">
              <span class="info-label">UbicaciÃ³n:</span>
              <span class="info-value location-ellipsis" [title]="e.location">{{ e.location }}</span>
            </div>
            <div class="info-item">
              <span class="info-label">Asistencias:</span>
              <span class="info-value">{{ e.attendances.length || 0 }} Asociados</span>
            </div>
          </div>
          
          <div class="event-description">
            {{ e.description | truncate:100 }}
          </div>
        </div>

        <div class="event-card-footer">
          <button class="button button-secondary" (click)="onEdit(e); $event.stopPropagation()">
            Editar
          </button>
          <button class="button button-danger" (click)="onDelete(e); $event.stopPropagation()">
            Eliminar
          </button>
        </div>
      </div>
    </div>

    <div *ngIf="!loading && filtered.length === 0" class="empty-state">
      <div class="empty-state-icon">ðŸ“…</div>
      <h3>No hay eventos</h3>
      <p>Crea tu primer evento para comenzar</p>
      <button class="button button-primary" (click)="onCreate()">
        Crear Evento
      </button>
    </div>
  </ng-container>
</div> 